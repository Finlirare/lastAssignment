{"version":3,"sources":["webpack:///./src/app/components/animated-like/animated-like.component.html","webpack:///./src/app/components/animated-like/animated-like.component.scss","webpack:///./src/app/components/animated-like/animated-like.component.ts","webpack:///./src/app/services/map.service.ts","webpack:///./src/app/services/socket.service.ts","webpack:///./src/app/tab2/tab2.module.ts","webpack:///./src/app/tab2/tab2.page.html","webpack:///./src/app/tab2/tab2.page.scss","webpack:///./src/app/tab2/tab2.page.ts"],"names":[],"mappings":"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","file":"tab2-tab2-module.js","sourcesContent":["module.exports = \"<ion-icon (click)=\\\"toggleLikeState()\\\" tappable [@star]=\\\"likeState\\\" size=\\\"large\\\" [name]=\\\"iconName\\\"></ion-icon>\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvYW5pbWF0ZWQtbGlrZS9hbmltYXRlZC1saWtlLmNvbXBvbmVudC5zY3NzIn0= */\"","import { Component, OnInit } from '@angular/core';\nimport { trigger, state, style, animate, transition } from '@angular/animations';\nimport { Socket } from 'ng-socket-io';\n\n@Component({\n  selector: 'app-animated-like',\n  templateUrl: './animated-like.component.html',\n  styleUrls: ['./animated-like.component.scss'],\n  animations: [\n    trigger('star', [\n        state('unliked', style({\n            color: '#000000',\n            opacity: '0.5',\n            transform: 'scale(1)'\n        })),\n        state('liked', style({\n            color: '#8ACAFE',\n            opacity: '1',\n            transform: 'scale(1.1)'\n        })),\n        transition('unliked <=> liked', animate('100ms ease-out'))\n    ])\n  ]\n})\nexport class AnimatedLikeComponent implements OnInit {\n\n  public likeState: string = 'unliked';\n  public iconName: string = 'outline-star';\n\n  constructor(private socket: Socket) { }\n\n  ngOnInit() {\n\n  }\n\n    toggleLikeState(){\n\t\tconsole.log(event);\n\t\t//var star = event.srcElement.nextElementSibling.src;\n\t\t//console.log(star);\n        if (this.likeState == 'unliked'){\n            this.likeState = 'liked';\n            this.iconName = 'star';\n\t\t\tconsole.log('liked image');\n           // this.socket.emit('star', star);\n        } else {\n            this.likeState = 'unliked';\n            this.iconName = 'outline-star';\n\t\t//\tthis.socket.emit('disStar', star);\n\t\t\tconsole.log('already liked, disliked img');\n        }\n    }\n}","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\ninterface Location {\r\n\tlatitude: string;\r\n\tlongitude: string;\r\n}\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class MapsService {\r\n\r\n\tconstructor(private http: HttpClient) { }\r\n\r\n\tgetLocation() {\r\n\t\treturn this.http.get<Location>('http://api.ipapi.com/check?access_key=756b800cd942342960e3bf62ce88dc88');\r\n\t}\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Socket } from 'ng-socket-io';\r\nimport { Observable } from 'rxjs/Observable';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class SocketService {\r\n  markers = [];\r\n  imageMarker = '';\r\n  imageM: any;\r\n\r\n  constructor(private socket: Socket) { \r\n   \r\n  }\r\n\r\n\r\n    \r\n\r\n  /*  console.log('getImages');\r\n    let observable = new Observable(observer => {\r\n      console.log('getImages2');\r\n      this.socket.on('images', data => {\r\n        console.log(data);\r\n        console.log('data2');\r\n        observer.next(data);\r\n      });\r\n    });\r\n    return observable;\r\n  */\r\n  }\r\n","import { IonicModule } from '@ionic/angular';\r\nimport { RouterModule } from '@angular/router';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Tab2Page } from './tab2.page';\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { AnimatedLikeComponent } from '../components/animated-like/animated-like.component';\r\nimport { AgmCoreModule } from '@agm/core';\r\nimport { AgmJsMarkerClustererModule } from '@agm/js-marker-clusterer';\r\n@NgModule({\r\n\timports: [\r\n\t\tIonicModule,\r\n\t\tCommonModule,\r\n\t\tFormsModule,\r\n\t\tRouterModule.forChild([{ path: '', component: Tab2Page }]), HttpClientModule,\r\n\t\tAgmCoreModule.forRoot({ apiKey: 'AIzaSyCf5imGc4PIY7TyUWgsjHPH-lXhcgZbQ1o' }),\r\n\t\tAgmJsMarkerClustererModule\r\n\t],\r\n\tdeclarations: [Tab2Page, AnimatedLikeComponent]\r\n})\r\nexport class Tab2PageModule { }\r\n","module.exports = \"<ion-header>\\r\\n\\t<ion-toolbar>\\r\\n\\t\\t<ion-buttons slot=\\\"start\\\">\\r\\n\\t\\t\\t<ion-button (click)=\\\"showLikes()\\\">Show <ion-icon name=\\\"star\\\"></ion-icon> only</ion-button>\\r\\n\\t\\t\\t<ion-button (click)=\\\"showAll()\\\">Show all</ion-button>\\r\\n\\t\\t</ion-buttons>\\r\\n\\t</ion-toolbar>\\r\\n</ion-header>\\r\\n<ion-content>\\r\\n\\t<agm-map [latitude]=\\\"lat\\\" [longitude]=\\\"lng\\\" [maxZoom]=\\\"200\\\">\\r\\n\\t\\t<!--<agm-marker-cluster [imagePath]=\\\"'https://raw.githubusercontent.com/googlemaps/v3-utility-library/master/markerclustererplus/images/m'\\\"\\r\\n\\t\\t\\t\\t\\t\\t[minimumClusterSize]=\\\"2\\\"\\r\\n\\t\\t\\t\\t\\t\\t[gridSize]=\\\"60\\\"\\r\\n\\t\\t\\t\\t\\t\\t>-->\\r\\n\\r\\n\\t\\t<agm-marker *ngFor=\\\"let mark of markers; let i = index\\\" [latitude]=\\\"mark.lat\\\" [longitude]=\\\"mark.long\\\">\\r\\n\\t\\t\\t<agm-info-window>\\r\\n\\t\\t\\t\\t<p>{{mark.uploadTime}}</p>\\r\\n\\t\\t\\t\\t<p>{{mark.liked}}</p>\\r\\n\\t\\t\\t\\t<ion-button (click)=\\\"star(mark)\\\" slot=\\\"icon-only\\\" fill=\\\"clear\\\">\\r\\n\\t\\t\\t\\t\\t<ion-icon [name]=\\\"mark.icon\\\" class=\\\"imgIcon\\\"></ion-icon>\\r\\n\\t\\t\\t\\t</ion-button>\\r\\n\\t\\t\\t\\t<img [attr.data-id]=\\\"mark._id\\\" [src]=\\\"mark.image\\\" width=\\\"200px\\\" />\\r\\n\\t\\t\\t</agm-info-window>\\r\\n\\t\\t</agm-marker>\\r\\n\\t\\t<!--</agm-marker-cluster>-->\\r\\n\\t</agm-map>\\r\\n</ion-content>\"","module.exports = \"agm-map {\\n  height: 100%; }\\n\\np {\\n  display: inline-block; }\\n\\nimg {\\n  display: block; }\\n\\n.imgIcon {\\n  position: absolute;\\n  top: 0; }\\n\\nion-icon {\\n  color: lightcoral; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdGFiMi9DOlxcVXNlcnNcXGNhcm9sXFxEb2N1bWVudHNcXEdpdEh1YlxcbGFzdEFzc2lnL3NyY1xcYXBwXFx0YWIyXFx0YWIyLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDRTtFQUNJLFlBQVksRUFBQTs7QUFHaEI7RUFDSSxxQkFBcUIsRUFBQTs7QUFHekI7RUFDSSxjQUFjLEVBQUE7O0FBR2xCO0VBQ0Usa0JBQWtCO0VBQ2xCLE1BQU0sRUFBQTs7QUFHUjtFQUNJLGlCQUFpQixFQUFBIiwiZmlsZSI6InNyYy9hcHAvdGFiMi90YWIyLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG4gIGFnbS1tYXAge1xyXG4gICAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgfVxyXG5cclxuICBwIHtcclxuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gIH1cclxuXHJcbiAgaW1nIHtcclxuICAgICAgZGlzcGxheTogYmxvY2s7XHJcbiAgfVxyXG5cclxuICAuaW1nSWNvbiB7XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICB0b3A6IDA7XHJcbiAgfVxyXG5cclxuICBpb24taWNvbiB7IFxyXG4gICAgICBjb2xvcjogbGlnaHRjb3JhbDtcclxuICAgICAgLy9kaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICB9XHJcbiJdfQ== */\"","import { Component } from '@angular/core';\r\nimport { MapsService } from '../services/map.service';\r\nimport { map, filter } from 'rxjs/operators';\r\nimport { Socket } from 'ng-socket-io';\r\nimport { SocketService } from '../services/socket.service';\r\n\r\n@Component({\r\n\tselector: 'app-tab2',\r\n\ttemplateUrl: 'tab2.page.html',\r\n\tstyleUrls: ['tab2.page.scss'],\r\n})\r\n\r\nexport class Tab2Page {\r\n\tlat = '';\r\n\tlng = '';\r\n\tmarkers: any = [];\r\n\tlocation: Object;\r\n\tlikedMarkerss: any = [];\r\n\r\n\tconstructor(private maps: MapsService,\r\n\t\tprivate socket: Socket,\r\n\t\tpublic socketService: SocketService,\r\n\t) { }\r\n\r\n\t// Executed when this tab is displayed\r\n\tionViewDidEnter() {\r\n\t\tthis.showMap();\r\n\t\tthis.socket.emit('getLikesMap');\r\n\t\tthis.socket.on('likedImgs', (likedImgs) => {\r\n\t\t\tthis.likedMarkerss = likedImgs;\r\n\t\t});\r\n\t\tthis.showAll();\r\n\t}\r\n\t// Show only liked images on the map\r\n\tshowLikes() {\r\n\t\t// emitting socket to server to fetch likes\r\n\t\tthis.socket.emit('getLikesMap');\r\n\t\t// fetching socket from db with likes\r\n\t\tthis.socket.on('likedImgs', (likedImgs) => {\r\n\t\t\tconst likedMarkers = [];\r\n\t\t\t// Looping through the fetched likes and comparing them to all the markers in order to set the right icon\r\n\t\t\tlikedImgs.forEach(likedImg => {\r\n\t\t\t\tthis.markers.forEach(marker => {\r\n\t\t\t\t\tif (likedImg.imageId === marker._id) {\r\n\t\t\t\t\t\tmarker.icon = 'star';\r\n\t\t\t\t\t\tlikedMarkers.push(marker);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.markers = likedMarkers;\r\n\t\t});\r\n\t}\r\n\t// Show all images on the map, also looping through the likes to display the right icon\r\n\tshowAll() {\r\n\t\tconst newMarkers = [];\r\n\t\tthis.socket.emit('getImgsMap');\r\n\t\tthis.socket.on('imagesMap', (images) => {\r\n\t\t\tthis.socket.emit('getLikesMap');\r\n\t\t\tthis.socket.on('likedImgs', (likes) => {\r\n\t\t\t\tfor (let i = 0; i < images.length; i++) {\r\n\t\t\t\t\tlet isLiked = false;\r\n\t\t\t\t\tfor (let j = 0; j < likes.length; j++) {\r\n\t\t\t\t\t\tconst like = likes[j];\r\n\t\t\t\t\t\tif (like.imageId === images[i]._id) {\r\n\t\t\t\t\t\t\tisLiked = true;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (isLiked) {\r\n\t\t\t\t\t\timages[i].icon = 'star';\r\n\t\t\t\t\t\tnewMarkers.push(images[i]);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\timages[i].icon = 'star-outline';\r\n\t\t\t\t\t\tnewMarkers.push(images[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// this.markers.push(image[i]);\r\n\t\t\t\t}\r\n\t\t\t\tthis.markers = newMarkers;\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\tshowMap() {\r\n\t\tthis.maps.getLocation().subscribe(data => {\r\n\t\t\tconsole.log(data);\r\n\t\t\tthis.lat = data.latitude;\r\n\t\t\tthis.lng = data.longitude;\r\n\t\t});\r\n\t}\r\n\t// Like an image, called to \"star\" an image in our app\r\n\tstar(mark: any) {\r\n\t\tif (mark.icon === 'star') {\r\n\t\t\tconsole.log('already liked, disliked img');\r\n\t\t\tthis.socket.emit('disStar', mark._id);\r\n\t\t\tmark.icon = 'star-outline';\r\n\t\t} else if (mark.icon === 'star-outline') {\r\n\t\t\tconsole.log('liked image');\r\n\t\t\tthis.socket.emit('star', mark._id);\r\n\t\t\tmark.icon = 'star';\r\n\t\t}\r\n\t}\r\n}\r\n"],"sourceRoot":""}